{% extends 'base.html' %}
<!--static 폴더 로드-->
{% load static %}

{% block title %}
회원가입
{% endblock %}
{% block content %}
  
<!-- css -->
<link rel="stylesheet" href="{% static 'css/user/signup.css' %}">

  <script>
    /* 썸네일 미리보기 함수 */
    function setThumbnail(event) {
      var reader = new FileReader();

      reader.onload = function (event) {
        var img = document.createElement("img");
        img.setAttribute("src", event.target.result);

        // 썸네일 크기 조절
        img.style.width = "200px"; // 너비 200px로 설정
        img.style.height = "auto"; // 높이 자동 설정

        document
          .querySelector("div#image_container")
          .appendChild(img);
      };

      reader.readAsDataURL(event.target.files[0]);
    }
  </script>

  <div class="container signup-box">
    <div class="wrap">
      <h2 class="title-center signup_center">
        <image class="profil-img" src="{% static 'admin/img/img_signup.gif' %}" >
          <span class="profil-title">익명이 등록하기</span>
        </h2>

        {% if error_message %}
        <div>{{ error_message }}</div>
        {% endif %}
        <!-- 회원가입 폼 시작 -->
        <form class="form-area signup_form" method="post" action="{% url 'sign-up' %}" enctype="multipart/form-data">
          {% csrf_token %}
          <div class="signup_btns">
            <button type="submit" class="btn btn-primary sign_up_btn">회원가입</button>
            <a href="{% url 'sign-in' %}" class="btn btn-secondary signup_cancel_btn">취소</a>
          </div>
          <div class="from_cover">
          <div class="form-group mt-2 mb-2 sign-box">
            <label for="username" class="label-name">
              아이디
            </label>
            <input type="text" class="form-control sign-input" id="username" name="username" placeholder="어서와~!" pattern="[a-z0-9_]{4,16}" title="영문,숫자 4~16자리까지 가능합니다." required>
          </div>
          <div class="form-group mt-2 mb-2 sign-box">
            <label for="password" class="label-name">
              비밀번호
            </label>
            <input type="password" class="form-control sign-input" id="password" name="password" placeholder="꼭꼭 숨겨라~♬ 머리카락 보일라~!">
          </div>
          <div class="form-group mt-2 mb-2 sign-box">
            <label for="password2" class="label-name">비밀번호 확인</label>
            <input type="password" class="form-control sign-input" id="password2" name="password2" placeholder="기억력을 테스트해보게써!">
          </div>
          <div class="form-group mt-2 mb-2 sign-box">
            <label for="nickname" class="label-name">닉네임</label>
            <input type="text" class="form-control sign-input" id="nickname" name="nickname" maxlength="10" placeholder="키미노! 나마에와! (10자 내)">
          </div>
          <div class="form-group mt-2 mb-2 sign-box">
            <label for="email" class="label-name">이메일</label>
            <input type="email" class="form-control sign-input" id="email" name="email" placeholder="이메일 양식 알쥐? 지켜줘!">
          </div>
        </div>
          <div class="form-group">
            <label for="signup_user_img" style="margin-left: 30px;">프로필 이미지</label>
            <input type="file" class="form-control-file user_img" id="user_img" name="user_img" onchange="setThumbnail(event);">
            <div id="image_container"></div>
            {% if form.user_img.errors %}
            <p style="color: red;">{{ form.user_img.errors }}</p>
            {% endif %}
          </div>
        </form>
        <!-- 회원가입 폼 끝 -->
  </div>
</div>
{% endblock %}