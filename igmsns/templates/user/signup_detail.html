{% extends 'base.html' %}
<!--static 폴더 로드-->
{% load static %}

{% block title %}
회원가입
{% endblock %}
{% block content %}
  <style>
    body {
      max-width: 800px;
      margin: auto;
    }
    .signup-box {
      background: #d9d9d9;
      border-radius: 50px;
      padding-bottom: 40px;
    }

    .profil-img {
      width: 100px;
      height: 100px;
      position: relative;
      left: -30px;
    }
    
    .profil-title {
      font-weight: bold;
      position: relative;
      left: -20px;
    }

    .title-center {
      padding: 20px 0;
    }

    .form-area {
      margin-top: 0px;
      padding: 0px 0;
      background-color: #fff;
      border-radius: 10px;
    }
    
    input.form-control {
      border: none;
      border-bottom: 1px solid #ccc;
      height: 30px;
      line-height: 30px;
      background: transparent;
      padding: 0;
    }
    
    .form-group {
      background-color: #ffff;
      border-radius: 30px;
    }

    .sign-box {
      display: flex;
      padding: 5px 0;
    }

    .label-name {
      padding: 0 15px;
    }

    .sign-input {
      width: 70%;
    }

    btn-secondary {
      color: #fff;
      background-color: #848484;
      border-color: #848484;
    }

    .btn-secondary:hover {
      color: #fff;
      background-color: #A4A4A4;
      border-color: #A4A4A4;
    }

    .btn-primary {
      color: #fff;
      background-color: #585858;
      border-color: #585858;
    }

    .btn-primary:hover {
      color: #fff;
      background-color: #1C1C1C;
      border-color: #1C1C1C;
    }
  </style>

  <script>
    /* 썸네일 미리보기 함수 */
    function setThumbnail(event) {
      var reader = new FileReader();

      reader.onload = function (event) {
        var img = document.createElement("img");
        img.setAttribute("src", event.target.result);

        // 썸네일 크기 조절
        img.style.width = "200px"; // 너비 200px로 설정
        img.style.height = "auto"; // 높이 자동 설정

        document
          .querySelector("div#image_container")
          .appendChild(img);
      };

      reader.readAsDataURL(event.target.files[0]);
    }
  </script>

  <div class="container signup-box">
    <div class="wrap">
      <h2 class="title-center">
        <image class="profil-img" src="{% static 'image 26.png' %}" alt="default Image">
          <span class="profil-title">익명이 등록하기</span>
        </h2>

        {% if error_message %}
        <div>{{ error_message }}</div>
        {% endif %}
        <!-- 회원가입 폼 시작 -->
        <form class="form-area" method="post" action="{% url 'sign-up' %}">
          {% csrf_token %}
          <div style="float: right">
            <button type="submit" class="btn btn-primary">회원가입</button>
            <a href="{% url 'sign-in' %}" class="btn btn-secondary cancel">취소</a>
          </div>
          <div class="form-group mt-2 mb-2 sign-box">
            <label for="username" class="label-name">
              아이디
            </label>
            <input type="text" class="form-control sign-input" id="username" name="username" pattern="[a-z0-9_]{4,16}" title="영문,숫자 4~16자리까지 가능합니다." required>
          </div>
          <div class="form-group mt-2 mb-2 sign-box">
            <label for="password" class="label-name">
              비밀 번호
            </label>
            <input type="password" class="form-control sign-input" id="password" name="password">
          </div>
          <div class="form-group mt-2 mb-2 sign-box">
            <label for="password2" class="label-name">비밀번호 확인</label>
            <input type="password" class="form-control sign-input" id="password2" name="password2">
          </div>
          <div class="form-group mt-2 mb-2 sign-box">
            <label for="nickname" class="label-name">닉네임</label>
            <input type="text" class="form-control sign-input" id="nickname" name="nickname">
          </div>
          <div class="form-group mt-2 mb-2 sign-box">
            <label for="email" class="label-name">이메일</label>
            <input type="email" class="form-control sign-input" id="email" name="email">
          </div>
          <div class="form-group">
            <label for="user_img" style="margin-left: 15px;">이미지</label>
            <input type="file" class="form-control-file" id="user_img" name="user_img" onchange="setThumbnail(event);">
            <div id="image_container"></div>
          </div>
        </form>
        <!-- 회원가입 폼 끝 -->
  </div>
</div>
{% endblock %}